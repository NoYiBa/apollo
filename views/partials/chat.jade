.panel.right(ng-class="{ 'full': showFullChat }")
    
    ap-chat#chat(
        ap-drop="onDropUpload"
        ap-onscrolltop="loadBackMessages"
        ng-class="{ 'fadeOutRightBig': justLoggedOut }"
    )
        
        table#chat-table.table(ng-show="!showSettings")

            //- Messages
            tr.animated.fadeIn(ng-repeat="message in selectedChat.messages")
                //- avatar for remote party
                td(width="60px")
                    img.img-responsive.img-circle(
                        style="width: 48px"
                        ng-src="{{ gravatar(message.from.email) }}"
                        ng-click="switchChat(message.from._id)"
                        ng-class="{ clickable: message.from._id !== account._id }"
                    )

                td
                    h6 {{ message.from.display }}
                    ap-message(ap-content="message.content" ap-file="message.file")
                td.align-right(width="90px")
                    small: small.help-block {{ moment(message.created).fromNow() }}

        //- Settings panel
        #settings.animated.fadeIn(ng-show="showSettings")
            include settings.jade

    .textarea-container(ng-show="selectedChat && selectedChat._id")
        button.btn.btn-default(
            ap-upload="onDropUpload"
        ): i.fa.fa-long-arrow-up
        textarea#textInput(
            ng-model="textInput"
            placeholder="Type text, markdown, paste images, or drag files"
            ap-enter="sendMessage(textInput); textInput = '';"
            ap-paste="onPasteUpload"
            ap-drop="onDropUpload"
        )

    .notify.middle.left(ng-show="pendingUploads")
        i.fa.fa-long-arrow-up
        | &nbsp;&nbsp;
        | Processing {{ pendingUploads }} {{ pendingUploads === 1 ? 'file' : 'files' }}...
